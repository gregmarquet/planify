<div class="container">
<h1 class="text-center m-t-50-px m-b-50-px"><%= @user_category.category.name %></h1>

<!--//////////////////////////////////////////////////-->
<!--                 List Of Tasks                    -->
<!--//////////////////////////////////////////////////-->


<% if @user_category.tasks.where(status: "incomplete").empty? %>
  <div class="alert alert-danger" role="alert">You do not have any active tasks! <%= link_to "Time to create a task", "#", data: {toggle: "modal", target: "#newTaskModal"}, class: "task_form_link alert-link", id: @user_category.category_id %>.</div>

<% else %>

  <div class="row m-b-50-px">
    <ul class="list-group col-sm-8 col-sm-offset-2" id="list-of-class" >

    <% @user_category.tasks.each do |task|%>
      <% if task.status ==  "incomplete"%>
        
        <%= render partial: "layouts/task", locals: {task: task} %>
            
      <% end %>
    <% end %>
    </ul>
    <%= link_to "Create a task", "#", data: {toggle: "modal", target: "#newTaskModal"}, class: "task_form_link alert-link", id: @user_category.category_id %>
  </div>

  <% end %>

<!-- - - - - - - - - - - Stats - - - - - - - - - - - --> 

  <% if !@user_category.tasks.empty?%>

  <h2 class="text-center m-b-50-px">Some stats</h2> 

  <!--//////////////////////////////////////////////////-->
  <!--              Stats Descriptions                  -->
  <!--//////////////////////////////////////////////////-->

  <div class="well font-blocks text-center m-b-50-px">

    <p>For <span class="underlined"><%= @user_category.category.name %></span>:</p>

    <p>You created <%= pluralize(@user_category.tasks.count, "task") %>.</p>

    <p>You have <%= pluralize(@user_category.tasks.where(status: 'incomplete').count, "active task") %>.</p>
    
    <p>You completed <%= pluralize(@user_category.tasks.where(status: 'completed').count, "task") %>.</p>
     
    <p>You abandonned <%= pluralize(@user_category.tasks.where(status: 'abandoned').count, "task") %>.</p>
    
  </div>


<!--//////////////////////////////////////////////////-->
<!--                   Pie Chart                      -->
<!--//////////////////////////////////////////////////-->

  <div class="m-b-50-px">

  <%= pie_chart @user_category.tasks.group('tasks.status').count, colors: ["pink", "#999", "grey"]  %>

  </div>
  <% end %>
  
</div>

